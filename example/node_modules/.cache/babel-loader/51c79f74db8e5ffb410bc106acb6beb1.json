{"ast":null,"code":"var HTML5_MEDIA_EVENT;\n(function (HTML5_MEDIA_EVENT) {\n  HTML5_MEDIA_EVENT[\"PLAY\"] = \"play\";\n  HTML5_MEDIA_EVENT[\"PAUSE\"] = \"pause\";\n  HTML5_MEDIA_EVENT[\"ENDED\"] = \"Ended\";\n})(HTML5_MEDIA_EVENT || (HTML5_MEDIA_EVENT = {}));\nvar MEDIA_TYPE;\n(function (MEDIA_TYPE) {\n  MEDIA_TYPE[\"IFRAME\"] = \"IFRAME\";\n  MEDIA_TYPE[\"VIDEO\"] = \"VIDEO\";\n  MEDIA_TYPE[\"AUDIO\"] = \"AUDIO\";\n})(MEDIA_TYPE || (MEDIA_TYPE = {}));\nvar EVENT_TYPE;\n(function (EVENT_TYPE) {\n  EVENT_TYPE[\"PLAY\"] = \"Play\";\n  EVENT_TYPE[\"ENDED\"] = \"Ended\";\n  EVENT_TYPE[\"PAUSE\"] = \"Pause\";\n  EVENT_TYPE[\"TIME_WATCHED\"] = \"TimeWatched\";\n})(EVENT_TYPE || (EVENT_TYPE = {}));\nvar MediaAutoTrack = /** @class */function () {\n  function MediaAutoTrack(params, provider) {\n    var _a;\n    this.eventActionMapping = (_a = {}, _a[EVENT_TYPE.ENDED] = this.endedEventAction.bind(this), _a[EVENT_TYPE.PLAY] = this.playEventAction.bind(this), _a[EVENT_TYPE.PAUSE] = this.pauseEventAction.bind(this), _a);\n    var eventData = params.eventData;\n    this._params = params;\n    this._mediaElement = document.getElementById(eventData.properties['domElementId']);\n    this._started = false;\n    this._provider = provider;\n    var mediaTrackFunMapping = {\n      IFRAME: this._iframeMediaTracker,\n      VIDEO: this._html5MediaTracker,\n      AUDIO: this._html5MediaTracker\n    };\n    mediaTrackFunMapping[this._mediaElement.tagName].bind(this)();\n    this._initYoutubeFrame();\n  }\n  MediaAutoTrack.prototype._initYoutubeFrame = function () {\n    this._youTubeIframeLoader = {\n      src: 'https://www.youtube.com/iframe_api',\n      loading: false,\n      loaded: false,\n      listeners: [],\n      load: function (callback) {\n        var _this = this;\n        this.listeners.push(callback);\n        if (this.loaded) {\n          setTimeout(function () {\n            _this.done();\n          });\n          return;\n        }\n        if (this.loading) {\n          return;\n        }\n        this.loading = true;\n        window['onYouTubeIframeAPIReady'] = function () {\n          _this.loaded = true;\n          _this.done();\n        };\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = this.src;\n        document.body.appendChild(script);\n      },\n      done: function () {\n        delete window['onYouTubeIframeAPIReady'];\n        while (this.listeners.length) {\n          this.listeners.pop()(window['YT']);\n        }\n      }\n    };\n  };\n  MediaAutoTrack.prototype._iframeMediaTracker = function () {\n    var that = this;\n    setInterval(function () {\n      if (that._started) {\n        that.recordEvent(MEDIA_TYPE.IFRAME, EVENT_TYPE.TIME_WATCHED);\n      }\n    }, 3 * 1000);\n    this._youTubeIframeLoader.load(function (YT) {\n      that._iframePlayer = new YT.Player(that._mediaElement.id, {\n        events: {\n          onStateChange: that._onPlayerStateChange.bind(that)\n        }\n      });\n    });\n  };\n  MediaAutoTrack.prototype._onPlayerStateChange = function (event) {\n    var iframeEventMapping = {\n      0: EVENT_TYPE.ENDED,\n      1: EVENT_TYPE.PLAY,\n      2: EVENT_TYPE.PAUSE\n    };\n    var eventType = iframeEventMapping[event.data];\n    if (eventType) {\n      this.eventActionMapping[eventType](MEDIA_TYPE.IFRAME);\n    }\n  };\n  MediaAutoTrack.prototype._html5MediaTracker = function () {\n    var that = this;\n    setInterval(function () {\n      if (that._started) {\n        that.recordEvent(MEDIA_TYPE.VIDEO, EVENT_TYPE.TIME_WATCHED);\n      }\n    }, 3 * 1000);\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PLAY, function () {\n      that.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO);\n    }, false);\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PAUSE, function () {\n      that.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO);\n    }, false);\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.ENDED, function () {\n      that.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO);\n    }, false);\n  };\n  MediaAutoTrack.prototype.playEventAction = function (mediaType) {\n    this._started = true;\n    this.recordEvent(mediaType, EVENT_TYPE.PLAY);\n  };\n  MediaAutoTrack.prototype.pauseEventAction = function (mediaType) {\n    this._started = false;\n    this.recordEvent(mediaType, EVENT_TYPE.PAUSE);\n  };\n  MediaAutoTrack.prototype.endedEventAction = function (mediaType) {\n    this._started = false;\n    this.recordEvent(mediaType, EVENT_TYPE.ENDED);\n  };\n  MediaAutoTrack.prototype.recordEvent = function (mediaType, eventType) {\n    var newParams = Object.assign({}, this._params);\n    var eventData = newParams.eventData;\n    eventData.eventType = eventType;\n    if (mediaType === MEDIA_TYPE.VIDEO) {\n      eventData.properties.timestamp = this._mediaElement.currentTime;\n      eventData.properties.duration = this._mediaElement.duration;\n    } else {\n      eventData.properties.timestamp = this._financial(this._iframePlayer.getCurrentTime());\n      eventData.properties.duration = this._financial(this._iframePlayer.getDuration());\n    }\n    var percentage = parseFloat(eventData.properties.timestamp) / parseFloat(eventData.properties.duration);\n    eventData.properties.eventValue = Number(percentage.toFixed(4));\n    delete eventData.properties.domElementId;\n    this._provider.putToBuffer(newParams);\n  };\n  MediaAutoTrack.prototype._financial = function (x) {\n    return Number.parseFloat(x).toFixed(4);\n  };\n  return MediaAutoTrack;\n}();\nexport { MediaAutoTrack };","map":{"version":3,"sources":["../../../src/Providers/AmazonPersonalizeHelper/MediaAutoTrack.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var HTML5_MEDIA_EVENT;\n(function (HTML5_MEDIA_EVENT) {\n    HTML5_MEDIA_EVENT[\"PLAY\"] = \"play\";\n    HTML5_MEDIA_EVENT[\"PAUSE\"] = \"pause\";\n    HTML5_MEDIA_EVENT[\"ENDED\"] = \"Ended\";\n})(HTML5_MEDIA_EVENT || (HTML5_MEDIA_EVENT = {}));\nvar MEDIA_TYPE;\n(function (MEDIA_TYPE) {\n    MEDIA_TYPE[\"IFRAME\"] = \"IFRAME\";\n    MEDIA_TYPE[\"VIDEO\"] = \"VIDEO\";\n    MEDIA_TYPE[\"AUDIO\"] = \"AUDIO\";\n})(MEDIA_TYPE || (MEDIA_TYPE = {}));\nvar EVENT_TYPE;\n(function (EVENT_TYPE) {\n    EVENT_TYPE[\"PLAY\"] = \"Play\";\n    EVENT_TYPE[\"ENDED\"] = \"Ended\";\n    EVENT_TYPE[\"PAUSE\"] = \"Pause\";\n    EVENT_TYPE[\"TIME_WATCHED\"] = \"TimeWatched\";\n})(EVENT_TYPE || (EVENT_TYPE = {}));\nvar MediaAutoTrack = /** @class */ (function () {\n    function MediaAutoTrack(params, provider) {\n        var _a;\n        this.eventActionMapping = (_a = {},\n            _a[EVENT_TYPE.ENDED] = this.endedEventAction.bind(this),\n            _a[EVENT_TYPE.PLAY] = this.playEventAction.bind(this),\n            _a[EVENT_TYPE.PAUSE] = this.pauseEventAction.bind(this),\n            _a);\n        var eventData = params.eventData;\n        this._params = params;\n        this._mediaElement = document.getElementById(eventData.properties['domElementId']);\n        this._started = false;\n        this._provider = provider;\n        var mediaTrackFunMapping = {\n            IFRAME: this._iframeMediaTracker,\n            VIDEO: this._html5MediaTracker,\n            AUDIO: this._html5MediaTracker,\n        };\n        mediaTrackFunMapping[this._mediaElement.tagName].bind(this)();\n        this._initYoutubeFrame();\n    }\n    MediaAutoTrack.prototype._initYoutubeFrame = function () {\n        this._youTubeIframeLoader = {\n            src: 'https://www.youtube.com/iframe_api',\n            loading: false,\n            loaded: false,\n            listeners: [],\n            load: function (callback) {\n                var _this = this;\n                this.listeners.push(callback);\n                if (this.loaded) {\n                    setTimeout(function () {\n                        _this.done();\n                    });\n                    return;\n                }\n                if (this.loading) {\n                    return;\n                }\n                this.loading = true;\n                window['onYouTubeIframeAPIReady'] = function () {\n                    _this.loaded = true;\n                    _this.done();\n                };\n                var script = document.createElement('script');\n                script.type = 'text/javascript';\n                script.src = this.src;\n                document.body.appendChild(script);\n            },\n            done: function () {\n                delete window['onYouTubeIframeAPIReady'];\n                while (this.listeners.length) {\n                    this.listeners.pop()(window['YT']);\n                }\n            },\n        };\n    };\n    MediaAutoTrack.prototype._iframeMediaTracker = function () {\n        var that = this;\n        setInterval(function () {\n            if (that._started) {\n                that.recordEvent(MEDIA_TYPE.IFRAME, EVENT_TYPE.TIME_WATCHED);\n            }\n        }, 3 * 1000);\n        this._youTubeIframeLoader.load(function (YT) {\n            that._iframePlayer = new YT.Player(that._mediaElement.id, {\n                events: { onStateChange: that._onPlayerStateChange.bind(that) },\n            });\n        });\n    };\n    MediaAutoTrack.prototype._onPlayerStateChange = function (event) {\n        var iframeEventMapping = {\n            0: EVENT_TYPE.ENDED,\n            1: EVENT_TYPE.PLAY,\n            2: EVENT_TYPE.PAUSE,\n        };\n        var eventType = iframeEventMapping[event.data];\n        if (eventType) {\n            this.eventActionMapping[eventType](MEDIA_TYPE.IFRAME);\n        }\n    };\n    MediaAutoTrack.prototype._html5MediaTracker = function () {\n        var that = this;\n        setInterval(function () {\n            if (that._started) {\n                that.recordEvent(MEDIA_TYPE.VIDEO, EVENT_TYPE.TIME_WATCHED);\n            }\n        }, 3 * 1000);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PLAY, function () {\n            that.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO);\n        }, false);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PAUSE, function () {\n            that.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO);\n        }, false);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.ENDED, function () {\n            that.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO);\n        }, false);\n    };\n    MediaAutoTrack.prototype.playEventAction = function (mediaType) {\n        this._started = true;\n        this.recordEvent(mediaType, EVENT_TYPE.PLAY);\n    };\n    MediaAutoTrack.prototype.pauseEventAction = function (mediaType) {\n        this._started = false;\n        this.recordEvent(mediaType, EVENT_TYPE.PAUSE);\n    };\n    MediaAutoTrack.prototype.endedEventAction = function (mediaType) {\n        this._started = false;\n        this.recordEvent(mediaType, EVENT_TYPE.ENDED);\n    };\n    MediaAutoTrack.prototype.recordEvent = function (mediaType, eventType) {\n        var newParams = Object.assign({}, this._params);\n        var eventData = newParams.eventData;\n        eventData.eventType = eventType;\n        if (mediaType === MEDIA_TYPE.VIDEO) {\n            eventData.properties.timestamp = this._mediaElement.currentTime;\n            eventData.properties.duration = this._mediaElement.duration;\n        }\n        else {\n            eventData.properties.timestamp = this._financial(this._iframePlayer.getCurrentTime());\n            eventData.properties.duration = this._financial(this._iframePlayer.getDuration());\n        }\n        var percentage = parseFloat(eventData.properties.timestamp) /\n            parseFloat(eventData.properties.duration);\n        eventData.properties.eventValue = Number(percentage.toFixed(4));\n        delete eventData.properties.domElementId;\n        this._provider.putToBuffer(newParams);\n    };\n    MediaAutoTrack.prototype._financial = function (x) {\n        return Number.parseFloat(x).toFixed(4);\n    };\n    return MediaAutoTrack;\n}());\nexport { MediaAutoTrack };\n//# sourceMappingURL=MediaAutoTrack.js.map"]},"metadata":{},"sourceType":"module"}