{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nconst pushToDataLayer = obj => {\n  window.dataLayer = window.dataLayer || [];\n  window.dataLayer.push(obj);\n};\nconst setUserData = userId => {\n  pushToDataLayer({\n    event: 'customUser',\n    userData: {\n      userId\n    }\n  });\n};\nconst createPageEvent = path => {\n  const obj = {\n    event: 'customPage',\n    pageData: {\n      path\n    }\n  };\n  pushToDataLayer(obj);\n};\nconst createCheckoutEnhancedEcommerceEvent = (step, product) => {\n  const nullObj = {\n    ecommerce: null\n  };\n  const obj = {\n    event: 'checkout',\n    ecommerce: {\n      checkout: {\n        actionField: {\n          step\n        },\n        ...(product && {\n          products: product\n        })\n      }\n    }\n  };\n  pushToDataLayer(nullObj); // Clear the previous ecommerce object.\n  pushToDataLayer(obj);\n};\nconst createPurchaseEnhancedEcommerceEvent = (revenue, id, shipping, coupon, product) => {\n  const nullObj = {\n    ecommerce: null\n  };\n  const obj = {\n    event: 'purchase',\n    ecommerce: {\n      purchase: {\n        actionField: {\n          id,\n          revenue,\n          shipping,\n          coupon\n        },\n        ...(product && {\n          products: product\n        })\n      }\n    }\n  };\n  pushToDataLayer(nullObj);\n  pushToDataLayer(obj);\n};\nconst createGenericEvent = (category, action, label, value, nonInteraction) => {\n  const obj = {\n    event: 'customEvent',\n    eventData: {\n      category,\n      action,\n      label,\n      value,\n      nonInteraction\n    }\n  };\n  pushToDataLayer(obj);\n};\nconst dataLayer = {\n  createPageEvent,\n  createGenericEvent,\n  setUserData,\n  createCheckoutEnhancedEcommerceEvent,\n  createPurchaseEnhancedEcommerceEvent\n};\nexports.dataLayer = dataLayer;","map":{"version":3,"sources":["../../../src/utils/data-layer.util.ts"],"names":["pushToDataLayer","obj","window","dataLayer","push","setUserData","userId","event","userData","createPageEvent","path","pageData","createCheckoutEnhancedEcommerceEvent","step","product","nullObj","ecommerce","checkout","actionField","products","createPurchaseEnhancedEcommerceEvent","revenue","id","shipping","coupon","purchase","createGenericEvent","category","action","label","value","nonInteraction","eventData"],"mappings":";;;;;AAQA,MAAMA,eAAe,GAAIC,GAAqB,IAAW;EACrDC,MAAM,CAACC,SAAS,GAAGD,MAAM,CAACC,SAAS,IAAI,EAAE;EACzCD,MAAM,CAACC,SAAS,CAACC,IAAI,CAACH,GAAG,CAAC;AAC9B,CAAC;AAED,MAAMI,WAAW,GAAIC,MAAc,IAAW;EAC1CN,eAAe,CAAC;IACZO,KAAK,EAAE,YAAY;IACnBC,QAAQ,EAAE;MACNF;IACJ;EACJ,CAAC,CAAC;AACN,CAAC;AAED,MAAMG,eAAe,GAAIC,IAAY,IAAW;EAC5C,MAAMT,GAAqB,GAAG;IAC1BM,KAAK,EAAE,YAAY;IACnBI,QAAQ,EAAE;MACND;IACJ;GACH;EACDV,eAAe,CAACC,GAAG,CAAC;AACxB,CAAC;AAED,MAAMW,oCAAoC,GAAG,CAACC,IAAY,EAAEC,OAA6B,KAAW;EAChG,MAAMC,OAAiC,GAAG;IACtCC,SAAS,EAAE;GACd;EAED,MAAMf,GAA6B,GAAG;IAClCM,KAAK,EAAE,UAAU;IACjBS,SAAS,EAAE;MACPC,QAAQ,EAAE;QACNC,WAAW,EAAE;UAAEL;SAAM;QACrB,IAAIC,OAAO,IAAI;UAAEK,QAAQ,EAAEL;SAAS;MACxC;IACJ;GACH;EACDd,eAAe,CAACe,OAAO,CAAC,CAAC,CAAA;EACzBf,eAAe,CAACC,GAAG,CAAC;AACxB,CAAC;AAED,MAAMmB,oCAAoC,GAAG,CACzCC,OAAe,EACfC,EAAU,EACVC,QAAgB,EAChBC,MAAc,EACdV,OAA6B,KACtB;EACP,MAAMC,OAAiC,GAAG;IACtCC,SAAS,EAAE;GACd;EAED,MAAMf,GAA6B,GAAG;IAClCM,KAAK,EAAE,UAAU;IACjBS,SAAS,EAAE;MACPS,QAAQ,EAAE;QACNP,WAAW,EAAE;UACTI,EAAE;UACFD,OAAO;UACPE,QAAQ;UACRC;SACH;QACD,IAAIV,OAAO,IAAI;UAAEK,QAAQ,EAAEL;SAAS;MACxC;IACJ;GACH;EAEDd,eAAe,CAACe,OAAO,CAAC;EACxBf,eAAe,CAACC,GAAG,CAAC;AACxB,CAAC;AAED,MAAMyB,kBAAkB,GAAG,CACvBC,QAAgB,EAChBC,MAAc,EACdC,KAAc,EACdC,KAAc,EACdC,cAAwB,KACjB;EACP,MAAM9B,GAAqB,GAAG;IAC1BM,KAAK,EAAE,aAAa;IACpByB,SAAS,EAAE;MACPL,QAAQ;MACRC,MAAM;MACNC,KAAK;MACLC,KAAK;MACLC;IACJ;GACH;EACD/B,eAAe,CAACC,GAAG,CAAC;AACxB,CAAC;AAEM,MAAME,SAAS,GAAG;EACrBM,eAAe;EACfiB,kBAAkB;EAClBrB,WAAW;EACXO,oCAAoC;EACpCQ;AACJ,CAAA","sourcesContent":["import { IDataLayerObject, IDataLayerProduct, IEnhancedEcommerceObject } from '@common/interfaces/data-layer.interface';\n\ndeclare global {\n    interface Window {\n        dataLayer?: IDataLayerObject[];\n    }\n}\n\nconst pushToDataLayer = (obj: IDataLayerObject): void => {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push(obj);\n};\n\nconst setUserData = (userId: string): void => {\n    pushToDataLayer({\n        event: 'customUser',\n        userData: {\n            userId,\n        },\n    });\n};\n\nconst createPageEvent = (path: string): void => {\n    const obj: IDataLayerObject = {\n        event: 'customPage',\n        pageData: {\n            path,\n        },\n    };\n    pushToDataLayer(obj);\n};\n\nconst createCheckoutEnhancedEcommerceEvent = (step: string, product?: IDataLayerProduct[]): void => {\n    const nullObj: IEnhancedEcommerceObject = {\n        ecommerce: null,\n    };\n\n    const obj: IEnhancedEcommerceObject = {\n        event: 'checkout',\n        ecommerce: {\n            checkout: {\n                actionField: { step },\n                ...(product && { products: product }),\n            },\n        },\n    };\n    pushToDataLayer(nullObj); // Clear the previous ecommerce object.\n    pushToDataLayer(obj);\n};\n\nconst createPurchaseEnhancedEcommerceEvent = (\n    revenue: string,\n    id: string,\n    shipping: number,\n    coupon: string,\n    product?: IDataLayerProduct[],\n): void => {\n    const nullObj: IEnhancedEcommerceObject = {\n        ecommerce: null,\n    };\n\n    const obj: IEnhancedEcommerceObject = {\n        event: 'purchase',\n        ecommerce: {\n            purchase: {\n                actionField: {\n                    id,\n                    revenue,\n                    shipping,\n                    coupon,\n                },\n                ...(product && { products: product }),\n            },\n        },\n    };\n\n    pushToDataLayer(nullObj);\n    pushToDataLayer(obj);\n};\n\nconst createGenericEvent = (\n    category: string,\n    action: string,\n    label?: string,\n    value?: number,\n    nonInteraction?: boolean,\n): void => {\n    const obj: IDataLayerObject = {\n        event: 'customEvent',\n        eventData: {\n            category,\n            action,\n            label,\n            value,\n            nonInteraction,\n        },\n    };\n    pushToDataLayer(obj);\n};\n\nexport const dataLayer = {\n    createPageEvent,\n    createGenericEvent,\n    setUserData,\n    createCheckoutEnhancedEcommerceEvent,\n    createPurchaseEnhancedEcommerceEvent,\n};\n"]},"metadata":{},"sourceType":"script"}