{"ast":null,"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { validate as validateArn } from \"@aws-sdk/util-arn-parser\";\n/**\n * @internal\n */\nexport function validateBucketNameMiddleware() {\n  var _this = this;\n  return function (next) {\n    return function (args) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var Bucket, err;\n        return __generator(this, function (_a) {\n          Bucket = args.input.Bucket;\n          if (typeof Bucket === \"string\" && !validateArn(Bucket) && Bucket.indexOf(\"/\") >= 0) {\n            err = new Error(\"Bucket name shouldn't contain '/', received '\" + Bucket + \"'\");\n            err.name = \"InvalidBucketName\";\n            throw err;\n          }\n          return [2 /*return*/, next(__assign({}, args))];\n        });\n      });\n    };\n  };\n}\n/**\n * @internal\n */\nexport var validateBucketNameMiddlewareOptions = {\n  step: \"initialize\",\n  tags: [\"VALIDATE_BUCKET_NAME\"],\n  name: \"validateBucketNameMiddleware\",\n  override: true\n};\n/**\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport var getValidateBucketNamePlugin = function (unused) {\n  return {\n    applyToStack: function (clientStack) {\n      clientStack.add(validateBucketNameMiddleware(), validateBucketNameMiddlewareOptions);\n    }\n  };\n};","map":{"version":3,"sources":["../../src/validate-bucket-name.ts"],"names":[],"mappings":";AASA,SAAS,QAAQ,IAAI,WAAW,QAAQ,0BAA0B;AAElE;;AAEG;AACH,OAAM,SAAU,4BAA4B,GAAA;EAA5C,IAAA,KAAA,GAAA,IAAA;EACE,OAAO,UACL,IAAoC,EAAA;IACD,OAAA,UACnC,IAAqC,EAAA;MAAA,OAAA,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;UAG1B,MAAM,GACb,IAAI,CAAA,KAAA,CAAA,MADS;UAEjB,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAC5E,GAAG,GAAG,IAAI,KAAK,CAAC,+CAAA,GAAgD,MAAM,GAAA,GAAG,CAAC;YAChF,GAAG,CAAC,IAAI,GAAG,mBAAmB;YAC9B,MAAM,GAAG;UACV;UACD,OAAA,CAAA,CAAA,CAAA,YAAO,IAAI,CAAA,QAAA,CAAA,CAAA,CAAA,EAAM,IAAI,CAAA,CAAG,CAAA;;;KACzB;EAZoC,CAYpC;AACH;AAEA;;AAEG;AACH,OAAO,IAAM,mCAAmC,GAA6B;EAC3E,IAAI,EAAE,YAAY;EAClB,IAAI,EAAE,CAAC,sBAAsB,CAAC;EAC9B,IAAI,EAAE,8BAA8B;EACpC,QAAQ,EAAE;CACX;AAED;;AAEG;AACH;AACA,OAAO,IAAM,2BAA2B,GAAG,UAAC,MAAW,EAAA;EAA0B,OAAC;IAChF,YAAY,EAAE,UAAC,WAAW,EAAA;MACxB,WAAW,CAAC,GAAG,CAAC,4BAA4B,EAAE,EAAE,mCAAmC,CAAC;IACtF;GACD;AAJgF,CAI/E","sourcesContent":["import {\n  InitializeHandler,\n  InitializeHandlerArguments,\n  InitializeHandlerOptions,\n  InitializeHandlerOutput,\n  InitializeMiddleware,\n  MetadataBearer,\n  Pluggable,\n} from \"@aws-sdk/types\";\nimport { validate as validateArn } from \"@aws-sdk/util-arn-parser\";\n\n/**\n * @internal\n */\nexport function validateBucketNameMiddleware(): InitializeMiddleware<any, any> {\n  return <Output extends MetadataBearer>(\n    next: InitializeHandler<any, Output>\n  ): InitializeHandler<any, Output> => async (\n    args: InitializeHandlerArguments<any>\n  ): Promise<InitializeHandlerOutput<Output>> => {\n    const {\n      input: { Bucket },\n    } = args;\n    if (typeof Bucket === \"string\" && !validateArn(Bucket) && Bucket.indexOf(\"/\") >= 0) {\n      const err = new Error(`Bucket name shouldn't contain '/', received '${Bucket}'`);\n      err.name = \"InvalidBucketName\";\n      throw err;\n    }\n    return next({ ...args });\n  };\n}\n\n/**\n * @internal\n */\nexport const validateBucketNameMiddlewareOptions: InitializeHandlerOptions = {\n  step: \"initialize\",\n  tags: [\"VALIDATE_BUCKET_NAME\"],\n  name: \"validateBucketNameMiddleware\",\n  override: true,\n};\n\n/**\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const getValidateBucketNamePlugin = (unused: any): Pluggable<any, any> => ({\n  applyToStack: (clientStack) => {\n    clientStack.add(validateBucketNameMiddleware(), validateBucketNameMiddlewareOptions);\n  },\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}