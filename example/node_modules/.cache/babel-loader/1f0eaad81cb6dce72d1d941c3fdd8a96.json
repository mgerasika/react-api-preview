{"ast":null,"code":"import { extends as _extends } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport { jsx, Global, css } from '@emotion/react';\nimport { CloseCircleOutlined } from '@ant-design/icons';\nimport { THEME } from '@common/constants/theme.constant';\nimport { Field } from '@common/general-ui/field/field.component';\nimport { Input } from '@common/general-ui/input/input.component';\nimport { consoleService } from '@common/services/console.service';\nimport { generateId } from '@common/utils/generate-id.util';\nimport React, { useMemo, useState, useEffect, useCallback } from 'react';\nimport ReactTestUtils from 'react-dom/test-utils';\nimport AddressSearch from 'react-loqate';\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() {\n  return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n}\nconst EMPTY = {\n  addressLine1: '',\n  addressLine2: '',\n  city: '',\n  postCode: '',\n  originalLabel: '',\n  label: ''\n};\nvar _ref = process.env.NODE_ENV === \"production\" ? {\n  name: \"bjn8wh\",\n  styles: \"position:relative\"\n} : {\n  name: \"cl043w-InputLoqate\",\n  styles: \"position:relative;label:InputLoqate;\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\nconst InputLoqate = props => {\n  const html_id = useMemo(() => generateId('html_id'), []);\n  const {\n    onChange,\n    name,\n    placeholder,\n    value,\n    errorMessage\n  } = props;\n  const [address, setAddress] = useState(value);\n  useEffect(() => {\n    setAddress(value);\n  }, [value]);\n  const handleClear = useCallback(() => {\n    setAddress(EMPTY);\n    const loqateInput = document.getElementById(html_id);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (loqateInput) {\n      loqateInput.value = '';\n      ReactTestUtils.Simulate.change(loqateInput);\n    }\n    onChange && onChange({\n      name,\n      value: EMPTY\n    });\n  }, [html_id, name, onChange]);\n  const renderInput = useCallback(inputProps => {\n    return jsx(Input, _extends({\n      readOnly: props.readOnly,\n      label: props.label,\n      type: \"text\",\n      name: name,\n      placeholder: placeholder\n    }, inputProps, {\n      id: html_id,\n      required: props.required,\n      value: address?.label || inputProps.value,\n      suffix: props.readOnly ? jsx(React.Fragment, null) : jsx(CloseCircleOutlined, {\n        onClick: handleClear\n      })\n    }));\n  }, [address?.label, handleClear, html_id, name, placeholder, props.label, props.readOnly, props.required]);\n  return jsx(Field, {\n    name: `${name}-top`,\n    errorMessage: errorMessage\n  }, jsx(\"div\", {\n    css: _ref\n  }, jsx(Global, {\n    styles: /*#__PURE__*/\n    /*#__PURE__*/\n    css(\".react-loqate-default-list{max-height:350px;overflow-y:auto;z-index:20;}.address-options{\", THEME.BOX_SHADOW_GRAY, \";li{background-color:\", THEME.WHITE, \";padding:5px 10px!important;}li:hover{background-color:\", THEME.GREEN, \";color:\", THEME.WHITE, \";cursor:pointer;}}\" + (process.env.NODE_ENV === \"production\" ? \"\" : \";label:InputLoqate;\"), process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0LWxvcWF0ZS5jb21wb25lbnQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVGK0IiLCJmaWxlIjoiaW5wdXQtbG9xYXRlLmNvbXBvbmVudC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5pbXBvcnQgeyBDbG9zZUNpcmNsZU91dGxpbmVkIH0gZnJvbSAnQGFudC1kZXNpZ24vaWNvbnMnO1xuaW1wb3J0IHsgVEhFTUUgfSBmcm9tICdAY29tbW9uL2NvbnN0YW50cy90aGVtZS5jb25zdGFudCc7XG5pbXBvcnQgeyBGaWVsZCwgSUZpZWxkUHJvcHMgfSBmcm9tICdAY29tbW9uL2dlbmVyYWwtdWkvZmllbGQvZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQGNvbW1vbi9nZW5lcmFsLXVpL2lucHV0L2lucHV0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBjb25zb2xlU2VydmljZSB9IGZyb20gJ0Bjb21tb24vc2VydmljZXMvY29uc29sZS5zZXJ2aWNlJztcbmltcG9ydCB7IGdlbmVyYXRlSWQgfSBmcm9tICdAY29tbW9uL3V0aWxzL2dlbmVyYXRlLWlkLnV0aWwnO1xuaW1wb3J0IHsgR2xvYmFsIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0VGVzdFV0aWxzIGZyb20gJ3JlYWN0LWRvbS90ZXN0LXV0aWxzJztcbmltcG9ydCBBZGRyZXNzU2VhcmNoIGZyb20gJ3JlYWN0LWxvcWF0ZSc7XG5pbXBvcnQgeyBjc3MgfSBmcm9tICd0d2luLm1hY3JvJztcblxuZXhwb3J0IGludGVyZmFjZSBJSW5wdXRMb3FhdGVWYWx1ZSB7XG4gICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUyOiBzdHJpbmc7XG4gICAgY2l0eTogc3RyaW5nO1xuICAgIHBvc3RDb2RlOiBzdHJpbmc7XG4gICAgb3JpZ2luYWxMYWJlbDogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG59XG5jb25zdCBFTVBUWTogSUlucHV0TG9xYXRlVmFsdWUgPSB7XG4gICAgYWRkcmVzc0xpbmUxOiAnJyxcbiAgICBhZGRyZXNzTGluZTI6ICcnLFxuICAgIGNpdHk6ICcnLFxuICAgIHBvc3RDb2RlOiAnJyxcbiAgICBvcmlnaW5hbExhYmVsOiAnJyxcbiAgICBsYWJlbDogJycsXG59O1xuZXhwb3J0IHR5cGUgSUlucHV0TG9xYXRlQ2hhbmdlSGFuZGxlciA9IChhcmc6IHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogSUlucHV0TG9xYXRlVmFsdWUgfSkgPT4gdm9pZDtcbmV4cG9ydCBpbnRlcmZhY2UgSUlucHV0TG9xYXRlUHJvcHM8VE5hbWUgPSBzdHJpbmc+IGV4dGVuZHMgSUZpZWxkUHJvcHM8SUlucHV0TG9xYXRlVmFsdWUsIFROYW1lPiB7XG4gICAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgIG9uQ2hhbmdlPzogSUlucHV0TG9xYXRlQ2hhbmdlSGFuZGxlcjtcbiAgICBvbkJsdXI/OiAoZTogUmVhY3QuRm9jdXNFdmVudCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElucHV0TG9xYXRlID0gKHByb3BzOiBJSW5wdXRMb3FhdGVQcm9wcyk6IEpTWC5FbGVtZW50ID0+IHtcbiAgICBjb25zdCBodG1sX2lkID0gdXNlTWVtbygoKSA9PiBnZW5lcmF0ZUlkKCdodG1sX2lkJyksIFtdKTtcbiAgICBjb25zdCB7IG9uQ2hhbmdlLCBuYW1lLCBwbGFjZWhvbGRlciwgdmFsdWUsIGVycm9yTWVzc2FnZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgW2FkZHJlc3MsIHNldEFkZHJlc3NdID0gdXNlU3RhdGUodmFsdWUpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0QWRkcmVzcyh2YWx1ZSk7XG4gICAgfSwgW3ZhbHVlXSk7XG5cbiAgICBjb25zdCBoYW5kbGVDbGVhciA9IHVzZUNhbGxiYWNrKCgpOiB2b2lkID0+IHtcbiAgICAgICAgc2V0QWRkcmVzcyhFTVBUWSk7XG5cbiAgICAgICAgY29uc3QgbG9xYXRlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChodG1sX2lkKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGxvcWF0ZUlucHV0KSB7XG4gICAgICAgICAgICBsb3FhdGVJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgUmVhY3RUZXN0VXRpbHMuU2ltdWxhdGUuY2hhbmdlKGxvcWF0ZUlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uQ2hhbmdlICYmXG4gICAgICAgICAgICBvbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogRU1QVFksXG4gICAgICAgICAgICB9KTtcbiAgICB9LCBbaHRtbF9pZCwgbmFtZSwgb25DaGFuZ2VdKTtcblxuICAgIGNvbnN0IHJlbmRlcklucHV0ID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIChpbnB1dFByb3BzOiBhbnkpOiBKU1guRWxlbWVudCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICByZWFkT25seT17cHJvcHMucmVhZE9ubHl9XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXtwcm9wcy5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICBuYW1lPXtuYW1lfVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5pbnB1dFByb3BzfVxuICAgICAgICAgICAgICAgICAgICBpZD17aHRtbF9pZH1cbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3Byb3BzLnJlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YWRkcmVzcz8ubGFiZWwgfHwgaW5wdXRQcm9wcy52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgc3VmZml4PXtwcm9wcy5yZWFkT25seSA/IDw+PC8+IDogPENsb3NlQ2lyY2xlT3V0bGluZWQgb25DbGljaz17aGFuZGxlQ2xlYXJ9IC8+fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgICBbYWRkcmVzcz8ubGFiZWwsIGhhbmRsZUNsZWFyLCBodG1sX2lkLCBuYW1lLCBwbGFjZWhvbGRlciwgcHJvcHMubGFiZWwsIHByb3BzLnJlYWRPbmx5LCBwcm9wcy5yZXF1aXJlZF0sXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxGaWVsZCBuYW1lPXtgJHtuYW1lfS10b3BgfSBlcnJvck1lc3NhZ2U9e2Vycm9yTWVzc2FnZX0+XG4gICAgICAgICAgICA8ZGl2IHR3PVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICA8R2xvYmFsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlYWN0LWxvcWF0ZS1kZWZhdWx0LWxpc3Qge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDM1MHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRyZXNzLW9wdGlvbnMge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7VEhFTUUuQk9YX1NIQURPV19HUkFZfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7VEhFTUUuV0hJVEV9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMTBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaTpob3ZlciB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7VEhFTUUuR1JFRU59O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJHtUSEVNRS5XSElURX07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8QWRkcmVzc1NlYXJjaFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3Byb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlPVwiZW5fR0JcIlxuICAgICAgICAgICAgICAgICAgICBjb3VudHJpZXM9e1snR0InXX1cbiAgICAgICAgICAgICAgICAgICAgZGVib3VuY2U9ezMwMH1cbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5PXtwcm9jZXNzLmVudi5SRUFDVF9BUFBfTE9RQVRFX0FQSV9LRVkgfHwgJyd9XG4gICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgICAgICAgICAgIChhZGRyZXNzOiBhbnkpOiB2b2lkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlU2VydmljZS5sb2coJ2FkZHJlc3MnLCBhZGRyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmc6IElJbnB1dExvcWF0ZVZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBhZGRyZXNzLkNpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NMaW5lMTogYWRkcmVzcy5MaW5lMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc0xpbmUyOiBbYWRkcmVzcy5MaW5lMiwgYWRkcmVzcy5MaW5lMywgYWRkcmVzcy5MaW5lNCwgYWRkcmVzcy5MaW5lNV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGYpID0+IGYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignLycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0Q29kZTogYWRkcmVzcy5Qb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcy5MaW5lMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFthZGRyZXNzLkxpbmUyLCBhZGRyZXNzLkxpbmUzLCBhZGRyZXNzLkxpbmU0LCBhZGRyZXNzLkxpbmU1XS5maWx0ZXIoKGYpID0+IGYpLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MuQ2l0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MuUG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZikgPT4gZilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcsICcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbExhYmVsOiBhZGRyZXNzLkxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWRkcmVzcyhhcmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlICYmIG9uQ2hhbmdlKHsgbmFtZSwgdmFsdWU6IGFyZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbbmFtZSwgb25DaGFuZ2VdLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzPXt1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5wdXQ6IHJlbmRlcklucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSwgW3JlbmRlcklucHV0XSl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXM9e3VzZU1lbW8oKCkgPT4gKHsgbGlzdDogJ2FkZHJlc3Mtb3B0aW9ucycgfSksIFtdKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvRmllbGQ+XG4gICAgKTtcbn07XG4iXX0= */\", process.env.NODE_ENV === \"production\" ? \"\" : \";label:InputLoqate;\")\n  }), jsx(AddressSearch, {\n    className: props.className,\n    locale: \"en_GB\",\n    countries: ['GB'],\n    debounce: 300,\n    apiKey: process.env.REACT_APP_LOQATE_API_KEY || '',\n    onSelect: useCallback(address => {\n      consoleService.log('address', address);\n      const arg = {\n        city: address.City,\n        addressLine1: address.Line1,\n        addressLine2: [address.Line2, address.Line3, address.Line4, address.Line5].filter(f => f).join('/'),\n        postCode: address.PostalCode,\n        label: [address.Line1, [address.Line2, address.Line3, address.Line4, address.Line5].filter(f => f).join('/'), address.City, address.PostalCode].filter(f => f).join(', '),\n        originalLabel: address.Label\n      };\n      setAddress(arg);\n      onChange && onChange({\n        name,\n        value: arg\n      });\n    }, [name, onChange]),\n    components: useMemo(() => {\n      return {\n        Input: renderInput\n      };\n    }, [renderInput]),\n    classes: useMemo(() => ({\n      list: 'address-options'\n    }), [])\n  })));\n};\nexport { InputLoqate };","map":{"version":3,"sources":["../../../../src/general-ui/input-loqate/input-loqate.component.tsx"],"names":["EMPTY","addressLine1","addressLine2","city","postCode","originalLabel","label","InputLoqate","props","html_id","useMemo","generateId","onChange","name","placeholder","value","errorMessage","address","setAddress","useState","useEffect","handleClear","useCallback","loqateInput","document","getElementById","ReactTestUtils","Simulate","change","renderInput","inputProps","___EmotionJSX","readOnly","required","css","THEME","BOX_SHADOW_GRAY","WHITE","GREEN","className","process","env","REACT_APP_LOQATE_API_KEY","consoleService","log","arg","City","Line1","Line2","Line3","Line4","Line5","filter","f","join","PostalCode","Label","Input","list"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { CloseCircleOutlined } from '@ant-design/icons';\nimport { THEME } from '@common/constants/theme.constant';\nimport { Field, IFieldProps } from '@common/general-ui/field/field.component';\nimport { Input } from '@common/general-ui/input/input.component';\nimport { consoleService } from '@common/services/console.service';\nimport { generateId } from '@common/utils/generate-id.util';\nimport { Global } from '@emotion/react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactTestUtils from 'react-dom/test-utils';\nimport AddressSearch from 'react-loqate';\nimport { css } from 'twin.macro';\n\nexport interface IInputLoqateValue {\n    addressLine1: string;\n    addressLine2: string;\n    city: string;\n    postCode: string;\n    originalLabel: string;\n    label: string;\n}\nconst EMPTY: IInputLoqateValue = {\n    addressLine1: '',\n    addressLine2: '',\n    city: '',\n    postCode: '',\n    originalLabel: '',\n    label: '',\n};\nexport type IInputLoqateChangeHandler = (arg: { name: string; value: IInputLoqateValue }) => void;\nexport interface IInputLoqateProps<TName = string> extends IFieldProps<IInputLoqateValue, TName> {\n    className?: string;\n    onChange?: IInputLoqateChangeHandler;\n    onBlur?: (e: React.FocusEvent) => void;\n}\n\nexport const InputLoqate = (props: IInputLoqateProps): JSX.Element => {\n    const html_id = useMemo(() => generateId('html_id'), []);\n    const { onChange, name, placeholder, value, errorMessage } = props;\n    const [address, setAddress] = useState(value);\n\n    useEffect(() => {\n        setAddress(value);\n    }, [value]);\n\n    const handleClear = useCallback((): void => {\n        setAddress(EMPTY);\n\n        const loqateInput = document.getElementById(html_id) as HTMLInputElement;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        if (loqateInput) {\n            loqateInput.value = '';\n            ReactTestUtils.Simulate.change(loqateInput);\n        }\n\n        onChange &&\n            onChange({\n                name,\n                value: EMPTY,\n            });\n    }, [html_id, name, onChange]);\n\n    const renderInput = useCallback(\n        (inputProps: any): JSX.Element => {\n            return (\n                <Input\n                    readOnly={props.readOnly}\n                    label={props.label}\n                    type=\"text\"\n                    name={name}\n                    placeholder={placeholder}\n                    {...inputProps}\n                    id={html_id}\n                    required={props.required}\n                    value={address?.label || inputProps.value}\n                    suffix={props.readOnly ? <></> : <CloseCircleOutlined onClick={handleClear} />}\n                />\n            );\n        },\n        [address?.label, handleClear, html_id, name, placeholder, props.label, props.readOnly, props.required],\n    );\n\n    return (\n        <Field name={`${name}-top`} errorMessage={errorMessage}>\n            <div tw=\"relative\">\n                <Global\n                    styles={css`\n                        .react-loqate-default-list {\n                            max-height: 350px;\n                            overflow-y: auto;\n                            z-index: 20;\n                        }\n\n                        .address-options {\n                            ${THEME.BOX_SHADOW_GRAY};\n                            li {\n                                background-color: ${THEME.WHITE};\n                                padding: 5px 10px !important;\n                            }\n                            li:hover {\n                                background-color: ${THEME.GREEN};\n                                color: ${THEME.WHITE};\n                                cursor: pointer;\n                            }\n                        }\n                    `}\n                />\n                <AddressSearch\n                    className={props.className}\n                    locale=\"en_GB\"\n                    countries={['GB']}\n                    debounce={300}\n                    apiKey={process.env.REACT_APP_LOQATE_API_KEY || ''}\n                    onSelect={useCallback(\n                        (address: any): void => {\n                            consoleService.log('address', address);\n                            const arg: IInputLoqateValue = {\n                                city: address.City,\n                                addressLine1: address.Line1,\n                                addressLine2: [address.Line2, address.Line3, address.Line4, address.Line5]\n                                    .filter((f) => f)\n                                    .join('/'),\n                                postCode: address.PostalCode,\n                                label: [\n                                    address.Line1,\n                                    [address.Line2, address.Line3, address.Line4, address.Line5].filter((f) => f).join('/'),\n                                    address.City,\n                                    address.PostalCode,\n                                ]\n                                    .filter((f) => f)\n                                    .join(', '),\n                                originalLabel: address.Label,\n                            };\n                            setAddress(arg);\n                            onChange && onChange({ name, value: arg });\n                        },\n                        [name, onChange],\n                    )}\n                    components={useMemo(() => {\n                        return {\n                            Input: renderInput,\n                        };\n                    }, [renderInput])}\n                    classes={useMemo(() => ({ list: 'address-options' }), [])}\n                />\n            </div>\n        </Field>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}