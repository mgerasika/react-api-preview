{"ast":null,"code":"import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nvar ESC = KeyCode.ESC,\n  TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n    setTriggerVisible = _ref.setTriggerVisible,\n    triggerRef = _ref.triggerRef,\n    menuRef = _ref.menuRef,\n    onVisibleChange = _ref.onVisibleChange,\n    autoFocus = _ref.autoFocus;\n  var focusMenuRef = React.useRef(false);\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\n      setTriggerVisible(false);\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n  var focusMenu = function focusMenu() {\n    var _menuRef$current, _menuRef$current$focu;\n    (_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : (_menuRef$current$focu = _menuRef$current.focus) === null || _menuRef$current$focu === void 0 ? void 0 : _menuRef$current$focu.call(_menuRef$current);\n    focusMenuRef.current = true;\n  };\n  var handleKeyDown = function handleKeyDown(event) {\n    var _menuRef$current2;\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n      case TAB:\n        if (!focusMenuRef.current && ((_menuRef$current2 = menuRef.current) === null || _menuRef$current2 === void 0 ? void 0 : _menuRef$current2.focus)) {\n          event.preventDefault();\n          focusMenu();\n        } else {\n          handleCloseMenuAndReturnFocus();\n        }\n        break;\n    }\n  };\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"names":["React","KeyCode","raf","ESC","TAB","useAccessibility","_ref","visible","setTriggerVisible","triggerRef","menuRef","onVisibleChange","autoFocus","focusMenuRef","useRef","handleCloseMenuAndReturnFocus","current","_triggerRef$current","_triggerRef$current$t","_triggerRef$current$t2","_triggerRef$current$t3","focus","call","focusMenu","_menuRef$current","_menuRef$current$focu","handleKeyDown","event","_menuRef$current2","keyCode","preventDefault","useEffect","window","addEventListener","removeEventListener"],"sources":["/home/mgerasika/Documents/git/react-api-preview/example/node_modules/rc-tabs/node_modules/rc-dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      setTriggerVisible = _ref.setTriggerVisible,\n      triggerRef = _ref.triggerRef,\n      menuRef = _ref.menuRef,\n      onVisibleChange = _ref.onVisibleChange,\n      autoFocus = _ref.autoFocus;\n  var focusMenuRef = React.useRef(false);\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\n\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\n      setTriggerVisible(false);\n\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n\n  var focusMenu = function focusMenu() {\n    var _menuRef$current, _menuRef$current$focu;\n\n    (_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : (_menuRef$current$focu = _menuRef$current.focus) === null || _menuRef$current$focu === void 0 ? void 0 : _menuRef$current$focu.call(_menuRef$current);\n    focusMenuRef.current = true;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var _menuRef$current2;\n\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        if (!focusMenuRef.current && ((_menuRef$current2 = menuRef.current) === null || _menuRef$current2 === void 0 ? void 0 : _menuRef$current2.focus)) {\n          event.preventDefault();\n          focusMenu();\n        } else {\n          handleCloseMenuAndReturnFocus();\n        }\n\n        break;\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}