{"ast":null,"code":"import { objectSpread2 as _objectSpread2, toConsumableArray as _toConsumableArray } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport { CONST } from '../constants/const.constant.js';\nimport { throwException } from './throw-exception.util.js';\nfunction createCollection(data, next_page, request) {\n  return {\n    request: _objectSpread2(_objectSpread2({}, request), {}, {\n      limit: (request === null || request === void 0 ? void 0 : request.limit) || CONST.LIST_LIMIT\n    }),\n    next_page: next_page || 0,\n    list: data || []\n  };\n}\nfunction deleteFromCollection(data, id) {\n  if (!data) {\n    return createCollection([], 0, {});\n  }\n  return _objectSpread2(_objectSpread2({}, data), {}, {\n    list: data === null || data === void 0 ? void 0 : data.list.filter(function (f) {\n      return f.id !== id;\n    })\n  });\n}\nfunction addToCollection(data, item) {\n  if (!data) {\n    return createCollection([item], 0, {});\n  }\n  return _objectSpread2(_objectSpread2({}, data), {}, {\n    list: [item].concat(_toConsumableArray(data.list))\n  });\n}\nfunction getItem(data, id) {\n  return data === null || data === void 0 ? void 0 : data.list.find(function (item) {\n    if (item.id === id) {\n      return item;\n    }\n    return undefined;\n  });\n}\nfunction updateCollection(data, id, newItem) {\n  if (!data) {\n    return createCollection([newItem], 0, {});\n  }\n  var found = false;\n  var res = _objectSpread2(_objectSpread2({}, data), {}, {\n    list: data === null || data === void 0 ? void 0 : data.list.map(function (item) {\n      if (item.id === id) {\n        found = true;\n        return _objectSpread2({}, newItem);\n      }\n      return item;\n    })\n  });\n  if (!found) {\n    throwException('update collection not found');\n  }\n  return res;\n}\nexport { addToCollection, createCollection, deleteFromCollection, getItem, updateCollection };","map":{"version":3,"sources":["../../../src/utils/create-collection.util.ts"],"names":["createCollection","data","next_page","request","limit","CONST","LIST_LIMIT","list","deleteFromCollection","id","filter","f","addToCollection","item","getItem","find","undefined","updateCollection","newItem","found","res","map","throwException"],"mappings":"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","sourcesContent":["import { CONST } from '@common/constants/const.constant';\nimport { ICollectionRequestOptions } from '@common/interfaces/collection-request-options.interface';\nimport { ICollection } from '@common/interfaces/collection.interface';\nimport { IIdObject } from '@common/interfaces/id-object.interface';\nimport { UID } from '@common/interfaces/uid.interface';\nimport { throwException } from './throw-exception.util';\n\nexport function createCollection<T, TFilter = unknown>(\n    data: T[] | undefined,\n    next_page: number | undefined,\n    request: (Omit<ICollectionRequestOptions<TFilter>, 'limit'> & { limit?: number }) | undefined,\n): ICollection<T, TFilter> {\n    return {\n        request: { ...request, limit: request?.limit || CONST.LIST_LIMIT },\n        next_page: next_page || 0,\n        list: data || [],\n    };\n}\n\nexport function deleteFromCollection<T extends IIdObject>(data: ICollection<T> | undefined, id: UID): ICollection<T> {\n    if (!data) {\n        return createCollection([], 0, {});\n    }\n    return {\n        ...data,\n        list: data?.list.filter((f) => f.id !== id),\n    };\n}\n\nexport function addToCollection<T extends IIdObject>(data: ICollection<T> | undefined, item: T): ICollection<T> {\n    if (!data) {\n        return createCollection([item], 0, {});\n    }\n    return {\n        ...data,\n        list: [item, ...data.list],\n    };\n}\n\nexport function getItem<T extends IIdObject>(data: ICollection<T> | undefined, id: UID): T | undefined {\n    return data?.list.find((item): T | undefined => {\n        if (item.id === id) {\n            return item;\n        }\n        return undefined;\n    });\n}\n\nexport function updateCollection<T extends IIdObject>(\n    data: ICollection<T> | undefined,\n    id: UID,\n    newItem: T,\n): ICollection<T> {\n    if (!data) {\n        return createCollection([newItem], 0, {});\n    }\n    let found = false;\n    const res = {\n        ...data,\n        list: data?.list.map((item) => {\n            if (item.id === id) {\n                found = true;\n                return { ...newItem };\n            }\n            return item;\n        }),\n    };\n    if (!found) {\n        throwException('update collection not found');\n    }\n    return res;\n}\n"]},"metadata":{},"sourceType":"module"}