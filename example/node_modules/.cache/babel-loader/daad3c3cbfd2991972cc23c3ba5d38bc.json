{"ast":null,"code":"/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { StorageHelper } from '@aws-amplify/core';\n/**\n * Default cache config\n */\nexport var defaultConfig = {\n  keyPrefix: 'aws-amplify-cache',\n  capacityInBytes: 1048576,\n  itemMaxSize: 210000,\n  defaultTTL: 259200000,\n  defaultPriority: 5,\n  warningThreshold: 0.8,\n  // the storage helper will check if localStorage exists,\n  // if not, will use a in-memory object instead\n  storage: new StorageHelper().getStorage()\n};\n/**\n * return the byte size of the string\n * @param str\n */\nexport function getByteLength(str) {\n  var ret = 0;\n  ret = str.length;\n  for (var i = str.length; i >= 0; i -= 1) {\n    var charCode = str.charCodeAt(i);\n    if (charCode > 0x7f && charCode <= 0x7ff) {\n      ret += 1;\n    } else if (charCode > 0x7ff && charCode <= 0xffff) {\n      ret += 2;\n    }\n    // trail surrogate\n    if (charCode >= 0xdc00 && charCode <= 0xdfff) {\n      i -= 1;\n    }\n  }\n  return ret;\n}\n/**\n * get current time\n */\nexport function getCurrTime() {\n  var currTime = new Date();\n  return currTime.getTime();\n}\n/**\n * check if passed value is an integer\n */\nexport function isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  }\n  return _isInteger(value);\n}\nfunction _isInteger(value) {\n  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n}\n/**\n * provide an object as the in-memory cache\n */\nvar store = {};\nvar CacheObject = /** @class */function () {\n  function CacheObject() {}\n  CacheObject.clear = function () {\n    store = {};\n  };\n  CacheObject.getItem = function (key) {\n    return store[key] || null;\n  };\n  CacheObject.setItem = function (key, value) {\n    store[key] = value;\n  };\n  CacheObject.removeItem = function (key) {\n    delete store[key];\n  };\n  return CacheObject;\n}();\nexport { CacheObject };","map":{"version":3,"sources":["../../src/Utils/CacheUtils.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;AAWG;AAGH,SAAS,aAAa,QAAQ,mBAAmB;AACjD;;AAEG;AACH,OAAO,IAAM,aAAa,GAAgB;EACzC,SAAS,EAAE,mBAAmB;EAC9B,eAAe,EAAE,OAAO;EACxB,WAAW,EAAE,MAAM;EACnB,UAAU,EAAE,SAAS;EACrB,eAAe,EAAE,CAAC;EAClB,gBAAgB,EAAE,GAAG;EACrB;EACA;EACA,OAAO,EAAE,IAAI,aAAa,EAAE,CAAC,UAAU;CACvC;AAED;;;AAGG;AACH,OAAM,SAAU,aAAa,CAAC,GAAW,EAAA;EACxC,IAAI,GAAG,GAAW,CAAC;EACnB,GAAG,GAAG,GAAG,CAAC,MAAM;EAEhB,KAAK,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;IACxC,IAAM,QAAQ,GAAW,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;IAC1C,IAAI,QAAQ,GAAG,IAAI,IAAI,QAAQ,IAAI,KAAK,EAAE;MACzC,GAAG,IAAI,CAAC;KACR,MAAM,IAAI,QAAQ,GAAG,KAAK,IAAI,QAAQ,IAAI,MAAM,EAAE;MAClD,GAAG,IAAI,CAAC;IACR;IACD;IACA,IAAI,QAAQ,IAAI,MAAM,IAAI,QAAQ,IAAI,MAAM,EAAE;MAC7C,CAAC,IAAI,CAAC;IACN;EACD;EAED,OAAO,GAAG;AACX;AAEA;;AAEG;AACH,OAAM,SAAU,WAAW,GAAA;EAC1B,IAAM,QAAQ,GAAG,IAAI,IAAI,EAAE;EAC3B,OAAO,QAAQ,CAAC,OAAO,EAAE;AAC1B;AAEA;;AAEG;AACH,OAAM,SAAU,SAAS,CAAC,KAAK,EAAA;EAC9B,IAAI,MAAM,CAAC,SAAS,EAAE;IACrB,OAAO,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC;EAC9B;EAED,OAAO,UAAU,CAAC,KAAK,CAAC;AACzB;AAEA,SAAS,UAAU,CAAC,KAAK,EAAA;EACxB,OACC,OAAO,KAAK,KAAK,QAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,KAAK;AAE7E;AAEA;;AAEG;AACH,IAAI,KAAK,GAAG,CAAA,CAAE;AACd,IAAA,WAAA,GAAA,aAAA,YAAA;EAAA,SAAA,WAAA,GAAA,CAgBA;EAfQ,WAAA,CAAA,KAAK,GAAZ,YAAA;IACC,KAAK,GAAG,CAAA,CAAE;EACX,CAAC;EAEM,WAAA,CAAA,OAAO,GAAd,UAAe,GAAW,EAAA;IACzB,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI;EAC1B,CAAC;EAEM,WAAA,CAAA,OAAO,GAAd,UAAe,GAAW,EAAE,KAAa,EAAA;IACxC,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK;EACnB,CAAC;EAEM,WAAA,CAAA,UAAU,GAAjB,UAAkB,GAAW,EAAA;IAC5B,OAAO,KAAK,CAAC,GAAG,CAAC;EAClB,CAAC;EACF,OAAA,WAAC;AAAD,CAAC,EAAA","sourceRoot":"","sourcesContent":["/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { StorageHelper } from '@aws-amplify/core';\n/**\n * Default cache config\n */\nexport var defaultConfig = {\n    keyPrefix: 'aws-amplify-cache',\n    capacityInBytes: 1048576,\n    itemMaxSize: 210000,\n    defaultTTL: 259200000,\n    defaultPriority: 5,\n    warningThreshold: 0.8,\n    // the storage helper will check if localStorage exists,\n    // if not, will use a in-memory object instead\n    storage: new StorageHelper().getStorage(),\n};\n/**\n * return the byte size of the string\n * @param str\n */\nexport function getByteLength(str) {\n    var ret = 0;\n    ret = str.length;\n    for (var i = str.length; i >= 0; i -= 1) {\n        var charCode = str.charCodeAt(i);\n        if (charCode > 0x7f && charCode <= 0x7ff) {\n            ret += 1;\n        }\n        else if (charCode > 0x7ff && charCode <= 0xffff) {\n            ret += 2;\n        }\n        // trail surrogate\n        if (charCode >= 0xdc00 && charCode <= 0xdfff) {\n            i -= 1;\n        }\n    }\n    return ret;\n}\n/**\n * get current time\n */\nexport function getCurrTime() {\n    var currTime = new Date();\n    return currTime.getTime();\n}\n/**\n * check if passed value is an integer\n */\nexport function isInteger(value) {\n    if (Number.isInteger) {\n        return Number.isInteger(value);\n    }\n    return _isInteger(value);\n}\nfunction _isInteger(value) {\n    return (typeof value === 'number' && isFinite(value) && Math.floor(value) === value);\n}\n/**\n * provide an object as the in-memory cache\n */\nvar store = {};\nvar CacheObject = /** @class */ (function () {\n    function CacheObject() {\n    }\n    CacheObject.clear = function () {\n        store = {};\n    };\n    CacheObject.getItem = function (key) {\n        return store[key] || null;\n    };\n    CacheObject.setItem = function (key, value) {\n        store[key] = value;\n    };\n    CacheObject.removeItem = function (key) {\n        delete store[key];\n    };\n    return CacheObject;\n}());\nexport { CacheObject };\n//# sourceMappingURL=CacheUtils.js.map"]},"metadata":{},"sourceType":"module"}