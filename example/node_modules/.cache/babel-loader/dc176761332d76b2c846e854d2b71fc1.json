{"ast":null,"code":"'use strict';\n\nconst nodeToJson = require('./node2json');\nconst xmlToNodeobj = require('./xmlstr2xmlnode');\nconst x2xmlnode = require('./xmlstr2xmlnode');\nconst buildOptions = require('./util').buildOptions;\nconst validator = require('./validator');\nexports.parse = function (xmlData) {\n  let givenOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let validationOption = arguments.length > 2 ? arguments[2] : undefined;\n  if (validationOption) {\n    if (validationOption === true) validationOption = {};\n    const result = validator.validate(xmlData, validationOption);\n    if (result !== true) {\n      throw Error(result.err.msg);\n    }\n  }\n  if (givenOptions.parseTrueNumberOnly && givenOptions.parseNodeValue !== false && !givenOptions.numParseOptions) {\n    givenOptions.numParseOptions = {\n      leadingZeros: false\n    };\n  }\n  let options = buildOptions(givenOptions, x2xmlnode.defaultOptions, x2xmlnode.props);\n  const traversableObj = xmlToNodeobj.getTraversalObj(xmlData, options);\n  //print(traversableObj, \"  \");\n  return nodeToJson.convertToJson(traversableObj, options);\n};\nexports.convertTonimn = require('./nimndata').convert2nimn;\nexports.getTraversalObj = xmlToNodeobj.getTraversalObj;\nexports.convertToJson = nodeToJson.convertToJson;\nexports.convertToJsonString = require('./node2json_str').convertToJsonString;\nexports.validate = validator.validate;\nexports.j2xParser = require('./json2xml');\nexports.parseToNimn = function (xmlData, schema, options) {\n  return exports.convertTonimn(exports.getTraversalObj(xmlData, options), schema, options);\n};\nfunction print(xmlNode, indentation) {\n  if (xmlNode) {\n    console.log(indentation + \"{\");\n    console.log(indentation + \"  \\\"tagName\\\": \\\"\" + xmlNode.tagname + \"\\\", \");\n    if (xmlNode.parent) {\n      console.log(indentation + \"  \\\"parent\\\": \\\"\" + xmlNode.parent.tagname + \"\\\", \");\n    }\n    console.log(indentation + \"  \\\"val\\\": \\\"\" + xmlNode.val + \"\\\", \");\n    console.log(indentation + \"  \\\"attrs\\\": \" + JSON.stringify(xmlNode.attrsMap, null, 4) + \", \");\n    if (xmlNode.child) {\n      console.log(indentation + \"\\\"child\\\": {\");\n      const indentation2 = indentation + indentation;\n      Object.keys(xmlNode.child).forEach(function (key) {\n        const node = xmlNode.child[key];\n        if (Array.isArray(node)) {\n          console.log(indentation + \"\\\"\" + key + \"\\\" :[\");\n          node.forEach(function (item, index) {\n            //console.log(indentation + \" \\\"\"+index+\"\\\" : [\")\n            print(item, indentation2);\n          });\n          console.log(indentation + \"],\");\n        } else {\n          console.log(indentation + \" \\\"\" + key + \"\\\" : {\");\n          print(node, indentation2);\n          console.log(indentation + \"},\");\n        }\n      });\n      console.log(indentation + \"},\");\n    }\n    console.log(indentation + \"},\");\n  }\n}","map":{"version":3,"names":["nodeToJson","require","xmlToNodeobj","x2xmlnode","buildOptions","validator","exports","parse","xmlData","givenOptions","validationOption","result","validate","Error","err","msg","parseTrueNumberOnly","parseNodeValue","numParseOptions","leadingZeros","options","defaultOptions","props","traversableObj","getTraversalObj","convertToJson","convertTonimn","convert2nimn","convertToJsonString","j2xParser","parseToNimn","schema","print","xmlNode","indentation","console","log","tagname","parent","val","JSON","stringify","attrsMap","child","indentation2","Object","keys","forEach","key","node","Array","isArray","item","index"],"sources":["/home/mgerasika/Documents/git/oddbox/oddbox-frontend-npm-usage-example/node_modules/fast-xml-parser/src/parser.js"],"sourcesContent":["'use strict';\n\nconst nodeToJson = require('./node2json');\nconst xmlToNodeobj = require('./xmlstr2xmlnode');\nconst x2xmlnode = require('./xmlstr2xmlnode');\nconst buildOptions = require('./util').buildOptions;\nconst validator = require('./validator');\n\nexports.parse = function(xmlData, givenOptions = {}, validationOption) {\n  if( validationOption){\n    if(validationOption === true) validationOption = {}\n    \n    const result = validator.validate(xmlData, validationOption);\n    if (result !== true) {\n      throw Error( result.err.msg)\n    }\n  }\n  if(givenOptions.parseTrueNumberOnly \n    && givenOptions.parseNodeValue !== false\n    && !givenOptions.numParseOptions){\n    \n      givenOptions.numParseOptions = {\n        leadingZeros: false,\n      }\n  }\n  let options = buildOptions(givenOptions, x2xmlnode.defaultOptions, x2xmlnode.props);\n\n  const traversableObj = xmlToNodeobj.getTraversalObj(xmlData, options)\n  //print(traversableObj, \"  \");\n  return nodeToJson.convertToJson(traversableObj, options);\n};\nexports.convertTonimn = require('./nimndata').convert2nimn;\nexports.getTraversalObj = xmlToNodeobj.getTraversalObj;\nexports.convertToJson = nodeToJson.convertToJson;\nexports.convertToJsonString = require('./node2json_str').convertToJsonString;\nexports.validate = validator.validate;\nexports.j2xParser = require('./json2xml');\nexports.parseToNimn = function(xmlData, schema, options) {\n  return exports.convertTonimn(exports.getTraversalObj(xmlData, options), schema, options);\n};\n\n\nfunction print(xmlNode, indentation){\n  if(xmlNode){\n    console.log(indentation + \"{\")\n    console.log(indentation + \"  \\\"tagName\\\": \\\"\" + xmlNode.tagname + \"\\\", \");\n    if(xmlNode.parent){\n      console.log(indentation + \"  \\\"parent\\\": \\\"\" + xmlNode.parent.tagname  + \"\\\", \");\n    }\n    console.log(indentation + \"  \\\"val\\\": \\\"\" + xmlNode.val  + \"\\\", \");\n    console.log(indentation + \"  \\\"attrs\\\": \" + JSON.stringify(xmlNode.attrsMap,null,4)  + \", \");\n\n    if(xmlNode.child){\n      console.log(indentation + \"\\\"child\\\": {\")\n      const indentation2 = indentation + indentation;\n      Object.keys(xmlNode.child).forEach( function(key) {\n        const node = xmlNode.child[key];\n\n        if(Array.isArray(node)){\n          console.log(indentation +  \"\\\"\"+key+\"\\\" :[\")\n          node.forEach( function(item,index) {\n            //console.log(indentation + \" \\\"\"+index+\"\\\" : [\")\n            print(item, indentation2);\n          })\n          console.log(indentation + \"],\")  \n        }else{\n          console.log(indentation + \" \\\"\"+key+\"\\\" : {\")\n          print(node, indentation2);\n          console.log(indentation + \"},\")  \n        }\n      });\n      console.log(indentation + \"},\")\n    }\n    console.log(indentation + \"},\")\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}